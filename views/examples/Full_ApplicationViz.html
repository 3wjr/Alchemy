<div ng-controller="examplesCtrl" id="graph-container-full"> <button ng-click="hideViz()" id="from-full-app-btn" type="button" class="btn btn-default" href="#"> <h3><i class="glyphicon glyphicon-arrow-left"></i>Back to Examples</h3> </button> <div class="alchemy" id="alchemy"></div> </div> <script type="text/javascript">var config = {  
   "dataSource":"data/team.json",
   "renderer":"svg",
   "alpha":0.5,
   "collisionDetection":true,
   "nodeOverlap":25,
   "fixNodes":false,
   "fixRootNodes":false,
   "forceLocked":true,
   "nodePositions":null,
   "showEditor":false,
   "captionToggle":true,
   "toggleRootNodes":false,
   "removeElement":false,
   "cluster":true,
   "clusterKey":"cluster",
   "clusterColours":[  
      "#ff8d8f",
      "#ffcd00",
      "#ff7e00",
      "#f800df",
      "#DD79FF",
      "#FF004B",
      "#00CDCD",
      "#FFFC00",
      "#5168FF",
      "#00FF30",
      "#184fff",
      "#f83f00",
      "#00C0FF"
   ],
   "clusterControl":false,
   "nodeStats":true,
   "edgeStats":false,
   "edgeFilters":false,
   "nodeFilters":true,
   "edgesToggle":true,
   "nodesToggle":true,
   "zoomControls":true,
   "nodeCaption":"firstName",
   "nodeCaptionsOnByDefault":false,
   "nodeStyle":{  
      "all":{  
         "radius":10,
         "color":"#68B9FE",
         "borderColor":"#127DC1",
         "captionColor":"#FFFFFF",
         "captionBackground":null,
         "captionSize":12,
         "selected":{  
            "color":"#FFFFFF",
            "borderColor":"#349FE3"
         },
         "highlighted":{  
            "color":"#EEEEFF"
         },
         "hidden":{  
            "color":"none",
            "borderColor":"none"
         }
      }
   },
   "nodeColour":null,
   "nodeMouseOver":"caption",
   "nodeRadius":10,
   "nodeTypes":{  
      "node_type":[  
         "family",
         "coworker",
         "classmate",
         "friend",
         "other"
      ]
   },
   "rootNodes":"root",
   "rootNodeRadius":15,
   "edgeCaption":"caption",
   "edgeCaptionsOnByDefault":false,
   "edgeClick":"default",
   "edgeStyle":{  
      "all":{  
         "width":4,
         "color":"#CCC",
         "opacity":0.2,
         "directed":true,
         "curved":true,
         "selected":{  
            "opacity":1
         },
         "highlighted":{  
            "opacity":1
         },
         "hidden":{  
            "opacity":0
         }
      }
   },
   "edgeTypes":null,
   "curvedEdges":false,
   "edgeOverlayWidth":20,
   "directedEdges":false,
   "edgeArrowSize":5,
   "search":true,
   "searchMethod":"contains",
   "backgroundColour":"#000000",
   "theme":null,
   "afterLoad":"afterLoad",
   "divSelector":"#alchemy",
   "initialScale":1,
   "initialTranslate":[  
      0,
      0
   ],
   "scaleExtent":[  
      0.5,
      2.4
   ],
   "dataWarning":"default",
   "warningMessage":"There be no data!  What's going on?",
   "showControlDash":true,
   "showStats":true,
   "showFilters":true,
   "toggleRootNotes":false
}


  
  alchemy.begin(config);
     
  // Hotfix.  THis has already been put into the library, but is being
  // patched up here due to a time crunch.  Does not effect the validity
  // of the example in any way
  alchemy.drawing.NodeUtils.nodeStyle = function(d) {
    var conf, node;
    conf = alchemy.conf;
    node = alchemy._nodes[d.id];
    if (conf.cluster && (node._state !== "hidden")) {
      d.fill = (function(d) {
        var clusterMap, clustering, colour, colourIndex, colours, key, nodeProp;
        clustering = alchemy.layout._clustering;
        nodeProp = node.getProperties();
        clusterMap = clustering.clusterMap;
        key = alchemy.conf.clusterKey;
        colours = conf.clusterColours;
        colourIndex = clusterMap[nodeProp[key]] % colours.length;
        colour = colours[colourIndex];
        return "" + colour;
      })(d);
    }
    return d;
  };
  alchemy.search = {
     init: function() {
       var searchBox;
       searchBox = alchemy.dash.select("#search input");
       return searchBox.on("keyup", function() {
         var input;
         input = searchBox[0][0].value.toLowerCase();
         _.each(alchemy._nodes, function(n) {
           return n._state = "active";
         });
         return _.each(alchemy._nodes, function(n) {
           var caption, conf, hidden;
           conf = alchemy.conf;
           caption = n.getProperties()[conf.nodeCaption];
           switch (conf.searchMethod) {
             case 'contains':
               hidden = caption.toLowerCase().indexOf(input) < 0;
               break;
             case 'begins':
               hidden = caption.toLowerCase().indexOf(input) !== 0;
           }
           n._state = hidden ? "hidden" : "active";
           n.setStyles();
           return _.each(n._adjacentEdges, function(id) {
             var e, pos, source, sourceState, target, targetState, _ref;
             _ref = id.split("-"), source = _ref[0], target = _ref[1], pos = _ref[2];
             e = alchemy._edges["" + source + "-" + target][pos];
             sourceState = alchemy._nodes["" + source]._state;
             targetState = alchemy._nodes["" + target]._state;
             if (e._state === "hidden" && (sourceState === "active" && targetState === "active")) {
               return e.toggleHidden();
             } else if (e._state === "active" && (sourceState === "hidden" || targetState === "hidden")) {
               return e.toggleHidden();
             }
           });
         });
       });
     }
   };
  </script>
